!function(){console.log("ChatVersion:","2.0");let n="";!async function(){try{const e=await fetch("https://api.ipify.org?format=json"),t=await e.json();n=t.ip,console.log("User IP collected for chat")}catch(e){console.error("Error fetching IP:",e),n="unknown"}}();const e={webhook:{url:"",route:""},branding:{logo:"https://cdn-icons-png.flaticon.com/512/5962/5962463.png",name:"Bella : Product Specialist",welcomeText:""},style:{primaryColor:"#003f72",secondaryColor:"#003f72",position:"right",backgroundColor:"#ffffff",fontColor:"#333333"},dealer:{name:"",phone:"",website:"",searchPage:"",provider:""},overtake:!1},t=window.ChatWidgetConfig?{webhook:{...e.webhook,...window.ChatWidgetConfig.webhook},branding:{...e.branding,...window.ChatWidgetConfig.branding},style:{...e.style,...window.ChatWidgetConfig.style},dealer:{...e.dealer,...window.ChatWidgetConfig.dealer},overtake:window.ChatWidgetConfig.overtake||!1,overtakePath:window.ChatWidgetConfig.overtakePath||"/"}:e;if(window.BellaAIChatWidgetInitialized)return;window.BellaAIChatWidgetInitialized=!0;let a=!1;function o(n){try{const e={manuallyClosed:n,timestamp:(new Date).getTime()};localStorage.setItem("bellaaiChatState",JSON.stringify(e))}catch(n){console.error("Error saving chat state:",n)}}function i(){return"undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){const e=16*Math.random()|0;return("x"===n?e:3&e|8).toString(16)}))}function r(n){if(!n)return"";const e=/<[a-z][\s\S]*>/i.test(n);return n=n.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank">$1</a>'),e||(n=n.replace(/(https?:\/\/[^\s<]+)(?![^<]*>)/g,'<a href="$1" target="_blank">Visit Website</a>')),n=(n=(n=n.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>")).replace(/\*([^*]+)\*/g,"<em>$1</em>")).replace(/\n/g,"<br>")}function s(){const n=document.getElementById("thinking-animation");n&&n.remove()}window.initialUtmParameters=function(n){const e={};try{const t=new URL(n),a=new URLSearchParams(t.search),o=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];o.forEach((function(n){a.has(n)&&(e[n]=a.get(n))}));for(const[n,t]of a.entries())n.startsWith("utm_")&&!o.includes(n)&&(e[n]=t)}catch(n){console.error("Error extracting UTM parameters:",n)}return e}(window.location.href),console.log("Initial UTM Parameters:",window.initialUtmParameters);let l,d="";function c(){if(d)try{const n={sessionId:d,messages:Array.from(E.children).filter((function(n){return n.classList.contains("chat-message")})).map((function(n){return{type:n.classList.contains("user")?"user":"bot",content:n.classList.contains("user")?n.textContent:n.innerHTML}})),inactivityMessageSent:g,promptBubbleShown:x,timestamp:(new Date).getTime(),utmParameters:window.initialUtmParameters||{}};localStorage.setItem("bellaaiChatSession",JSON.stringify(n))}catch(n){console.error("Error saving chat session:",n)}}function p(){try{const n=localStorage.getItem("bellaaiChatSession");if(n){const e=JSON.parse(n),t=(new Date).getTime()-e.timestamp;if(t<864e5)return E.innerHTML="",d=e.sessionId,e.inactivityMessageSent&&(g=!0),e.promptBubbleShown&&(x=!0),e.utmParameters&&(window.initialUtmParameters=e.utmParameters),e.messages&&e.messages.length>0&&e.messages.forEach((function(n){const e=document.createElement("div");e.className="chat-message "+n.type,"user"===n.type?e.textContent=n.content:e.innerHTML=n.content,E.appendChild(e)})),!0;localStorage.removeItem("bellaaiChatSession")}}catch(n){console.error("Error loading saved chat session:",n),localStorage.removeItem("bellaaiChatSession")}return!1}const h=12e4;let m,g=!1;function u(){clearTimeout(l),g||(l=setTimeout((function(){if(v.classList.contains("open")&&d){const n=document.createElement("div");n.className="chat-message bot",n.innerHTML=r("Do you have any questions I can help with?"),E.appendChild(n),E.scrollTop=E.scrollHeight,g=!0,c()}}),h))}let x=!1;function f(){const n=document.getElementById("prompt-bubble");n&&n.remove()}const y=`.bellaai-chat-widget {--chat--color-primary: ${t.style.primaryColor};--chat--color-secondary: ${t.style.secondaryColor};font-family: 'Geist Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;}.bellaai-chat-widget .chat-container {position: fixed;bottom: 20px;right: 20px;z-index: 2147483647;width: 380px;height: 600px;background: #ffffff;border-radius: 12px !important;box-shadow: 0 8px 32px rgba(133, 79, 255, 0.15);border: 1px solid rgba(133, 79, 255, 0.2);overflow: hidden;opacity: 0;transform-origin: bottom right;transform: scale(0);transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);pointer-events: none;display: flex;flex-direction: column;visibility: hidden;}@media screen and (max-width: 600px) {.bellaai-chat-widget .chat-container {width: 100%;height: 100%;bottom: 0;right: 0;border-radius: 0;box-shadow: none;}.bellaai-chat-widget .chat-container.position-left {left: 0;}}.bellaai-chat-widget .chat-container.position-left {right: auto;left: 20px;transform-origin: bottom left;}.bellaai-chat-widget .chat-container.open {opacity: 1;transform: scale(1);pointer-events: all;visibility: visible;}.bellaai-chat-widget .brand-header {padding: 16px;display: flex;align-items: center;gap: 12px;border-bottom: 1px solid rgba(133, 79, 255, 0.1);position: relative;}.bellaai-chat-widget .close-button {position: absolute;right: 16px;top: 50%;transform: translateY(-50%);background: none;border: none;cursor: pointer;font-size: 20px;opacity: 0.6;}.bellaai-chat-widget .brand-header img {width: 32px;height: 32px;}.bellaai-chat-widget .brand-header span {font-size: 18px;font-weight: 500;}.bellaai-chat-widget .chat-interface {display: flex;flex-direction: column;height: 100%;}.bellaai-chat-widget .chat-messages {flex: 1;overflow-y: auto;padding: 20px;display: flex;flex-direction: column;}.bellaai-chat-widget .chat-message {padding: 12px 16px;margin: 8px 0;border-radius: 12px;max-width: 80%;word-wrap: break-word;font-size: 14px;line-height: 1.5;}.bellaai-chat-widget .chat-message.user {background: linear-gradient(135deg, var(--chat--color-primary) 0%, var(--chat--color-secondary) 100%);color: #fff;align-self: flex-end;box-shadow: 0 4px 12px rgba(133, 79, 255, 0.2);border-radius: 12px;padding: 12px 16px;margin: 8px 0;max-width: 80%;word-wrap: break-word;font-size: 14px;line-height: 1.5;}.bellaai-chat-widget .chat-message.bot {background: #ffffff;border: 1px solid rgba(133, 79, 255, 0.2);color: #333;align-self: flex-start;box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);}.bellaai-chat-widget .chat-message.bot a {color: var(--chat--color-primary);text-decoration: none;font-weight: 500;}.bellaai-chat-widget .chat-message.bot a:hover {text-decoration: underline;}.bellaai-chat-widget .chat-message.bot a:hover {text-decoration: underline;}.bellaai-chat-widget .chat-input {padding: 16px;border-top: 1px solid rgba(133, 79, 255, 0.1);display: flex;gap: 8px;}.bellaai-chat-widget .chat-input textarea {flex: 1 !important;padding: 12px !important;border: 1px solid rgba(133, 79, 255, 0.2) !important;border-radius: 8px !important;resize: none !important;font-family: inherit !important;font-size: 14px !important;height: auto !important;min-height: 40px !important;max-height: 120px !important;width: auto !important;box-sizing: border-box !important;}.bellaai-chat-widget .chat-input button {background: linear-gradient(135deg, var(--chat--color-primary) 0%, var(--chat--color-secondary) 100%);color: white;border: none;border-radius: 8px;padding: 0 20px;cursor: pointer;font-weight: 500;}.bellaai-chat-widget .chat-toggle {position: fixed;bottom: 20px;right: 20px;display: flex;align-items: center;gap: 12px;padding: 16px 20px;background: linear-gradient(135deg, var(--chat--color-primary) 0%, var(--chat--color-secondary) 100%);color: white;border: none;cursor: pointer;box-shadow: 0 4px 12px rgba(133, 79, 255, 0.3);z-index: 2147483647;border-radius: 30px !important;transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);opacity: 1;transform: scale(1);}.bellaai-chat-widget .chat-toggle.hidden {opacity: 0;transform: scale(0.8);pointer-events: none;}.bellaai-chat-widget .chat-toggle-content {display: flex;align-items: center;gap: 12px;position: relative;}.bellaai-chat-widget .chat-toggle svg {width: 24px;height: 24px;fill: currentColor;color: white;}.bellaai-chat-widget .chat-toggle-text {font-size: 16px;font-weight: 500;white-space: nowrap;line-height: 24px;}.bellaai-chat-widget .online-indicator {position: absolute;top: -20px;right: -4px;width: 12px;height: 12px;background-color: #22c55e;border-radius: 50%;border: 2px solid white;animation: pulse 2s infinite;}@keyframes pulse {0% {box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4);}70% {box-shadow: 0 0 0 10px rgba(34, 197, 94, 0);}100% {box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);}}/* Update mobile styles for online indicator */@media screen and (max-width: 600px) {.bellaai-chat-widget .chat-toggle {width: 60px;height: 60px;padding: 0;justify-content: center;}.bellaai-chat-widget .chat-toggle-text {display: none;}.bellaai-chat-widget .online-indicator {top: -20px;right: -4px;}}.bellaai-chat-widget .chat-toggle.position-left {right: auto;left: 20px;}.bellaai-chat-widget .chat-toggle svg {width: 24px;height: 24px;fill: currentColor;}.bellaai-chat-widget .thinking {display: flex;align-items: center;padding: 12px 16px;margin: 8px 0;border-radius: 12px;max-width: 80%;align-self: flex-start;background: #fff;border: 1px solid rgba(133, 79, 255, 0.2);gap: 8px;}.bellaai-chat-widget .thinking span {color: #666;font-size: 14px;}.bellaai-chat-widget .dots {display: flex;gap: 2px;}.bellaai-chat-widget .dot {height: 8px;width: 8px;background-color: var(--chat--color-primary);border-radius: 50%;display: inline-block;opacity: 0.4;animation: dot-typing 1.4s infinite ease-in-out;}.bellaai-chat-widget .dot:nth-child(1) { animation-delay: 0s; }.bellaai-chat-widget .dot:nth-child(2) { animation-delay: 0.2s; }.bellaai-chat-widget .dot:nth-child(3) { animation-delay: 0.4s; }/* Prompt bubble styles */.bellaai-chat-widget .prompt-bubble {position: absolute;bottom: 90px;right: 10px;background: white;color: var(--chat--color-primary);padding: 8px 14px;border-radius: 18px;font-size: 14px;font-weight: 500;box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);cursor: pointer;z-index: 2147483646;border: 1px solid rgba(133, 79, 255, 0.2);animation: bounce-in 0.5s;}/* Position the prompt bubble on the left if chat is on the left */.bellaai-chat-widget .chat-toggle.position-left + .prompt-bubble {right: auto;left: 10px;}@keyframes bounce-in {0% { transform: scale(0.5); opacity: 0; }50% { transform: scale(1.05); opacity: 0.9; }100% { transform: scale(1); opacity: 1; }}@keyframes dot-typing {0%, 60%, 100% { opacity: 0.4; transform: scale(1); }30% { opacity: 1; transform: scale(1.2); }}`,b=document.createElement("style");b.textContent=y,document.head.appendChild(b);const w=document.createElement("div");w.className="bellaai-chat-widget";const v=document.createElement("div");v.className="chat-container"+("left"===t.style.position?" position-left":"");const k=`<div class="chat-interface"><div class="brand-header"><img src="${t.branding.logo}" alt="${t.branding.name}"><span>${t.branding.name}</span><button class="close-button">Ã—</button></div><div class="chat-messages"></div><div class="chat-input"><textarea placeholder="Type your message here..." rows="1"></textarea><button type="submit">Send</button></div></div>`;v.innerHTML=k;const C=document.createElement("button");C.className="chat-toggle"+("left"===t.style.position?" position-left":""),C.innerHTML='<div class="chat-toggle-content"><div class="online-indicator"></div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z" fill="currentColor"/></svg><span class="chat-toggle-text">Chat with us!</span></div>',w.appendChild(v),w.appendChild(C),document.body.appendChild(w);v.querySelector(".chat-interface");const E=v.querySelector(".chat-messages"),T=v.querySelector("textarea"),L=v.querySelector('button[type="submit"]'),S=v.querySelector(".close-button");function I(){const e=window.bellaaiTextarea||T,a=e.value.trim();if(!a)return;if(["close","close chat","exit","quit","dismiss"].includes(a.toLowerCase()))return D?R():j(),void(e.value="");!async function(e){if(!e.trim())return;const a=document.createElement("div");a.className="chat-message user",a.textContent=e,E.appendChild(a),E.scrollTop=E.scrollHeight;!function(){const n=document.createElement("div");n.className="thinking",n.innerHTML='<span>Bella is typing</span><div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>',n.id="thinking-animation",E.appendChild(n),E.scrollTop=E.scrollHeight}();try{const a=z||await P(),o={chatInput:e,sessionId:d,metadata:{dealer:t.dealer,pageContext:a,utmParameters:window.initialUtmParameters||{},userIP:n}},i=await fetch(t.webhook.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!i.ok)throw new Error("Failed to send message");let p="";const h=await i.text();try{const n=JSON.parse(h);Array.isArray(n)&&n.length>0&&n[0].output?p=n[0].output:n&&"object"==typeof n?p=n.output||n.response||n.message||"":"string"==typeof n&&(p=n)}catch(n){p=h}p&&""!==p.trim()||(p="I received your message, but I'm having trouble generating a response."),s();const m=p.match(/\[REDIRECT\](.*?)\[\/REDIRECT\]/);if(m&&m[1]){const n=function(n){try{const e=new URL(n),t=new URLSearchParams(e.search);return t.set("utm_source","BellaAI"),t.set("utm_medium","chat"),t.set("utm_campaign","Drivonic-MarketBuilder-AIChat"),e.search=t.toString(),e.toString()}catch(e){return console.error("Error appending UTM parameters to URL:",e),n}}(m[1].trim()),e=document.createElement("div");e.className="chat-message bot",e.innerHTML=r("Redirecting you now..."),E.appendChild(e);const t=document.createElement("div");return t.className="chat-message bot",t.innerHTML=r("Our product specialists are ready to help you explore your options and answer any questions. What's the best phone number to reach you at?"),E.appendChild(t),E.scrollTop=E.scrollHeight,c(),void setTimeout((()=>{window.location.href=n}),2e3)}const x=p.replace(/\[REDIRECT\][\s\S]*?\[\/REDIRECT\]/g,"").trim();if(x){const n=document.createElement("div");n.className="chat-message bot",n.innerHTML=r(x),E.appendChild(n),E.scrollTop=E.scrollHeight}c(),g=!1,clearTimeout(l),u()}catch(n){console.error("Error sending message:",n),s();const e=document.createElement("div");e.className="chat-message bot",e.innerHTML=r("I apologize, but I'm having trouble connecting right now. Please try again in a moment."),E.appendChild(e),E.scrollTop=E.scrollHeight}}(a),e.value="",e.style.height="auto"}C.addEventListener("click",(function(){if(!v.classList.contains("open")){v.classList.add("open"),C.classList.add("hidden"),window.innerWidth<=600&&(document.body.style.overflow="hidden"),E.innerHTML="";p()||(g=!1,d=i(),P().then((()=>{U()}))),c(),E.scrollTop=E.scrollHeight,u(),clearTimeout(m)}})),S.addEventListener("click",(function(){D?R():j(),a=!0,o(!0),window.innerWidth<=600&&(document.body.style.overflow="")})),T.addEventListener("input",(function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"})),L.addEventListener("click",I),T.addEventListener("keypress",(function(n){"Enter"!==n.key||n.shiftKey||(n.preventDefault(),I())})),window.addEventListener("resize",(function(){window.innerWidth<=600?v.classList.contains("open")&&(document.body.style.overflow="hidden"):document.body.style.overflow=""}));let z=null,H=null;function N(){const n=window.location.pathname.toLowerCase();return n.includes("/new-vehicles/")||n.includes("/used-vehicles/")?"inventory":n.includes("/finance")?"finance":n.includes("/service")?"service":n.includes("/parts")?"parts":n.includes("/about")?"about":n.includes("/contact")?"contact":"/"===n||"/index.html"===n?"home":"other"}async function P(){try{const n=document.querySelector("main, #main, .main-content, .content");if(!n)return console.log("No main content found on page"),null;const e=function(n){if(!n)return"";const e=n.cloneNode(!0),t=e.getElementsByTagName("script");for(;t.length>0;)t[0].parentNode.removeChild(t[0]);const a=e.getElementsByTagName("style");for(;a.length>0;)a[0].parentNode.removeChild(a[0]);let o=e.textContent||e.innerText;return o=o.replace(/\s+/g," ").trim(),o=o.replace(/<[^>]*>/g,""),o}(n);if(!e)return console.log("No text content found in main content"),null;const a=await async function(n){const e=(new TextEncoder).encode(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map((n=>n.toString(16).padStart(2,"0"))).join("")}(e),o=function(n,e){try{const t=localStorage.getItem("bellaaiPageSummary");if(t){const{url:a,hash:o,summary:i,timestamp:r}=JSON.parse(t);if(a===n&&o===e&&Date.now()-r<36e5)return i}}catch(n){console.error("Error reading cached summary:",n)}return null}(window.location.href,a);if(o)return console.log("Using cached page summary"),o;const i={title:document.title,url:window.location.href,description:document.querySelector('meta[name="description"]')?.getAttribute("content")||"",type:N(),dealer:t.dealer},r=new URLSearchParams({content:e,metadata:JSON.stringify(i)}),s=await fetch("https://automation.cloudcovehosting.com/webhook/pagecontext?"+r.toString(),{method:"GET",headers:{"Content-Type":"application/json",Origin:window.location.origin}});if(!s.ok)return console.warn("Failed to generate page summary:",s.status,s.statusText),null;const l=await s.text();return l?function(n,e,t){try{const a={url:n,hash:e,summary:t,timestamp:Date.now()};localStorage.setItem("bellaaiPageSummary",JSON.stringify(a))}catch(n){console.error("Error caching summary:",n)}}(window.location.href,a,l):console.warn("Empty response from page context webhook"),l}catch(n){return console.error("Error generating page summary:",n),null}}function M(){H&&clearTimeout(H),H=setTimeout((async()=>{z=await P()}),1e3)}document.addEventListener("DOMContentLoaded",M);const W=window.location.href;function U(){["Hi, I'm Bella! I'm a product specialist here to help guide you through our site today.",`We do things a little bit differently here at ${t.dealer.name||"[DealerName]"} and our customers really seem to appreciate it.`,"First let me ask, what brings you here today so I can help guide you to the right department?"].forEach(((n,e)=>{setTimeout((()=>{const e=document.createElement("div");e.className="chat-message bot",e.innerHTML=r(n),E.appendChild(e),E.scrollTop=E.scrollHeight,c()}),1e3*e)}))}new MutationObserver((()=>{const n=window.location.href;n!==W&&(W=n,M())})).observe(document,{subtree:!0,childList:!0});let D=null;function R(){D&&(w.appendChild(v),D.remove(),D=null),v.classList.remove("overtake-modal"),v.style.position="",v.style.left="",v.style.top="",v.style.transform="",v.style.zIndex="",v.style.width="",v.style.height="",v.style.maxHeight="",v.style.borderRadius="",v.style.boxShadow="",v.style.opacity="",v.style.background="",v.style.display="",v.style.flexDirection="",v.style.padding="",document.body.style.overflow="",j()}const B=document.createElement("style");B.textContent='@keyframes bellaai-fadein {from { opacity: 0; }to { opacity: 1; }}.bellaai-overtake-overlay {animation: bellaai-fadein 0.4s forwards;}.overtake-modal {--chat--color-primary: #003f72;--chat--color-secondary: #003f72;}.overtake-modal .brand-header {padding-bottom: 12px;border-bottom: 1px solid #f0f0f0;margin-bottom: 12px;}.overtake-modal .brand-header img {width: 40px;height: 40px;margin-right: 10px;}.overtake-modal .brand-header span {font-size: 22px;font-weight: 600;}.overtake-modal .close-button {position: absolute;right: 18px;top: 18px;background: none;border: none;cursor: pointer;font-size: 28px;color: #888;opacity: 0.7;z-index: 2;transition: opacity 0.2s;}.overtake-modal .close-button:hover {opacity: 1;}.overtake-modal .chat-messages {display: flex !important;flex-direction: column !important;flex: 1;overflow-y: auto;padding: 10px 0 10px 0;margin-bottom: 10px;background: none;min-height: 400px;}.overtake-modal .chat-input {padding: 0;border-top: 1px solid #f0f0f0;margin-top: 10px;background: none;display: flex;align-items: center;}.overtake-modal .chat-input textarea {flex: 1 !important;padding: 12px !important;border: 1px solid rgba(133, 79, 255, 0.2) !important;border-radius: 8px !important;resize: none !important;font-family: inherit !important;font-size: 14px !important;height: auto !important;min-height: 40px !important;max-height: 120px !important;width: auto !important;box-sizing: border-box !important;margin-right: 8px;}.overtake-modal .chat-input button[type="submit"] {background: linear-gradient(135deg, var(--chat--color-primary) 0%, var(--chat--color-secondary) 100%) !important;color: #fff !important;border: none !important;border-radius: 8px !important;padding: 0 18px !important;cursor: pointer !important;font-weight: 500 !important;font-size: 16px !important;height: 40px !important;min-width: 40px !important;display: flex !important;align-items: center !important;justify-content: center !important;}.overtake-modal .chat-input button[type="submit"] svg {fill: #fff !important;stroke: #fff !important;}.overtake-modal .chat-message.user {background: linear-gradient(135deg, var(--chat--color-primary) 0%, var(--chat--color-secondary) 100%) !important;color: #fff !important;align-self: flex-end !important;box-shadow: 0 4px 12px rgba(133, 79, 255, 0.2) !important;border-radius: 12px !important;padding: 12px 16px !important;margin: 8px 0 !important;max-width: 80% !important;word-wrap: break-word !important;font-size: 14px !important;line-height: 1.5 !important;}@media (max-width: 600px) {.overtake-modal {padding: 0 !important;}.overtake-modal .brand-header img {width: 32px;height: 32px;}.overtake-modal .brand-header span {font-size: 18px;}.overtake-modal .chat-messages {min-height: 200px;}}',document.head.appendChild(B);const O=document.createElement("style");function A(){f(),x=!0,v.classList.add("open"),C.classList.add("hidden"),window.innerWidth<=600&&(document.body.style.overflow="hidden"),E.scrollTop=E.scrollHeight,u(),clearTimeout(m)}function j(){v.classList.remove("open"),C.classList.remove("hidden"),window.innerWidth<=600&&(document.body.style.overflow="")}O.textContent=".overtake-modal {width: 800px !important;max-width: 95vw;}@media (max-width: 900px) {.overtake-modal {width: 95vw !important;}}@media (max-width: 600px) {.overtake-modal {width: 95vw !important;height: 85vh !important;max-height: 85vh !important;border-radius: 12px !important;padding: 16px 6px 10px 6px !important;}}",document.head.appendChild(O),function(){const n=t.overtakePath||"/";return!0===t.overtake&&window.location.pathname===n&&!localStorage.getItem("bellaaiOvertakeShown")}()&&setTimeout((()=>{D=document.createElement("div"),D.className="bellaai-overtake-overlay",D.style.position="fixed",D.style.inset="0",D.style.background="rgba(0,0,0,0.6)",D.style.zIndex="2147483646",D.style.display="flex",D.style.alignItems="center",D.style.justifyContent="center",D.style.transition="opacity 0.4s",D.style.opacity="0",D.style.animation="bellaai-fadein 0.4s forwards",v.classList.add("overtake-modal"),v.style.position="relative",v.style.left="",v.style.top="",v.style.transform="",v.style.zIndex="2147483647",v.style.width="800px",v.style.height="auto",v.style.maxHeight="90vh",v.style.borderRadius="18px",v.style.boxShadow="0 8px 32px rgba(0,0,0,0.25)",v.style.opacity="0",v.style.background="#fff",v.style.display="flex",v.style.flexDirection="column",v.style.padding="32px 28px 20px 28px",v.style.transition="opacity 0.4s",setTimeout((()=>{v.style.opacity="1"}),50),window.innerWidth<=900&&(v.style.width="95vw"),window.innerWidth<=600&&(v.style.width="95vw",v.style.height="85vh",v.style.maxHeight="85vh",v.style.borderRadius="12px",v.style.padding="16px 6px 10px 6px"),C.classList.add("hidden"),document.body.appendChild(D),D.appendChild(v),document.body.style.overflow="hidden",localStorage.setItem("bellaaiOvertakeShown","1"),A()}),400),function(){if(window.BellaAIChatWidgetChatInitialized)return;window.BellaAIChatWidgetChatInitialized=!0,p()||(g=!1,d=i(),U(),P()),c(),E.scrollTop=E.scrollHeight,u(),clearTimeout(m),C.addEventListener("click",(function(){A()})),S.addEventListener("click",(function(){j(),a=!0,o(!0),window.innerWidth<=600&&(document.body.style.overflow="")})),L.addEventListener("click",I),T.addEventListener("keypress",(function(n){"Enter"!==n.key||n.shiftKey||(n.preventDefault(),I())})),T.addEventListener("input",(function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"})),window.addEventListener("resize",(function(){window.innerWidth<=600?v.classList.contains("open")&&(document.body.style.overflow="hidden"):document.body.style.overflow=""}))}(),function(){const n=v.querySelector(".chat-input");if(!n)return;n.innerHTML="";const e=document.createElement("textarea");e.placeholder="Type your message here...",e.rows=1,e.style.resize="none",e.style.flex="1",e.style.marginRight="8px",e.className=T.className;const t=document.createElement("button");t.type="submit",t.innerHTML='<svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>',t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.background="linear-gradient(135deg, var(--chat--color-primary) 0%, var(--chat--color-secondary) 100%)",t.style.color="white",t.style.border="none",t.style.borderRadius="8px",t.style.padding="0 18px",t.style.cursor="pointer",t.style.fontWeight="500",t.style.fontSize="16px",t.style.height="40px",t.style.minWidth="40px",n.appendChild(e),n.appendChild(t),t.addEventListener("click",I),e.addEventListener("keypress",function(n){"Enter"===n.key&&!n.shiftKey&&(n.preventDefault(),I())}),e.addEventListener("input",function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"}),window.bellaaiTextarea=e}();const q=document.createElement("style");q.textContent='.chat-message.user {background: linear-gradient(135deg, var(--chat--color-primary) 0%, var(--chat--color-secondary) 100%);color: white;align-self: flex-end;box-shadow: 0 4px 12px rgba(133, 79, 255, 0.2);border-radius: 12px;padding: 12px 16px;margin: 8px 0;max-width: 80%;word-wrap: break-word;font-size: 14px;line-height: 1.5;}.chat-message.bot {background: #ffffff;border: 1px solid rgba(133, 79, 255, 0.2);color: #333;align-self: flex-start;box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);border-radius: 12px;padding: 12px 16px;margin: 8px 0;max-width: 80%;word-wrap: break-word;font-size: 14px;line-height: 1.5;}.chat-input {display: flex;align-items: center;gap: 8px;padding: 0;border-top: 1px solid #f0f0f0;margin-top: 10px;background: none;}.chat-input textarea {flex: 1 !important;padding: 12px !important;border: 1px solid rgba(133, 79, 255, 0.2) !important;border-radius: 8px !important;resize: none !important;font-family: inherit !important;font-size: 14px !important;height: auto !important;min-height: 40px !important;max-height: 120px !important;width: auto !important;box-sizing: border-box !important;margin-right: 8px;}.chat-input button[type="submit"] {background: linear-gradient(135deg, var(--chat--color-primary) 0%, var(--chat--color-secondary) 100%);color: white;border: none;border-radius: 8px;padding: 0 18px;cursor: pointer;font-weight: 500;font-size: 16px;height: 40px;min-width: 40px;display: flex;align-items: center;justify-content: center;}',document.head.appendChild(q),document.addEventListener("keydown",(function(n){"Escape"===n.key&&(D?R():v.classList.contains("open")&&j())}))}();